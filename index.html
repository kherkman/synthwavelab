<!DOCTYPE html>
<html>
<head>
    <title>Synth Lab</title>
    <meta charset="UTF-8">
    <style>
        /* CSS is identical to the previous version */
         :root {
            --color-bg-deep: #0d0221;
            --color-bg-medium: #1a0a3b;
            --color-bg-container: rgba(26, 10, 59, 0.85);
            --color-bg-container-opaque: #14082E;
            --color-neon-pink: #ff07eb;
            --color-neon-cyan: #03dac5;
            --color-neon-magenta: #fc1da7;
            --color-neon-blue: #00bfff;
            --color-neon-green: #39ff14;
            --color-neon-yellow: #f8f32b;
            --color-drum-kick: #ff8c00;
            --color-drum-snare: #c0c0c0;
            --color-drum-hat: #00e5e5;
            --color-text-primary: #e0e7ff;
            --color-text-secondary: #a09cb0;
            --color-text-dim: #6c6a7c;
            --font-family-main: 'Consolas', 'Monaco', 'Lucida Console', monospace;
            --glow-cyan: 0 0 5px var(--color-neon-cyan), 0 0 10px var(--color-neon-cyan), 0 0 15px rgba(3, 218, 197, 0.5);
            --glow-pink: 0 0 5px var(--color-neon-pink), 0 0 10px var(--color-neon-pink), 0 0 15px rgba(255, 7, 235, 0.5);
            --glow-green: 0 0 5px var(--color-neon-green), 0 0 10px var(--color-neon-green), 0 0 15px rgba(57, 255, 20, 0.5);
            --glow-yellow: 0 0 5px var(--color-neon-yellow), 0 0 10px var(--color-neon-yellow), 0 0 15px rgba(248, 243, 43, 0.5);
            --bg-grid-image: linear-gradient(0deg, transparent 24px, var(--color-bg-medium) 25px, var(--color-bg-medium) 26px, transparent 27px, transparent 74px, var(--color-bg-medium) 75px, var(--color-bg-medium) 76px, transparent 77px, transparent), linear-gradient(90deg, transparent 24px, var(--color-bg-medium) 25px, var(--color-bg-medium) 26px, transparent 27px, transparent 74px, var(--color-bg-medium) 75px, var(--color-bg-medium) 76px, transparent 77px, transparent);
        }
        body { font-family: var(--font-family-main); background-color: var(--color-bg-deep); background-image: var(--bg-grid-image); background-size: 50px 50px; background-attachment: fixed; color: var(--color-text-primary); display: flex; flex-direction: column; align-items: center; gap: 20px; padding-bottom: 50px; font-size: 14px; letter-spacing: 0.5px; }
        h1 { color: var(--color-neon-pink); text-shadow: var(--glow-pink); font-size: 2.5em; margin-top: 30px; margin-bottom: 10px; letter-spacing: 2px; text-transform: uppercase; }
        
        #main-container { display: flex; flex-direction: row; justify-content: center; align-items: flex-start; gap: 20px; width: 100%; max-width: 1920px; padding: 0 20px; box-sizing: border-box; }
        .column { display: flex; flex-direction: column; gap: 20px; flex-basis: 48%; min-width: 400px; }

        #master-toggle-controls { display: flex; gap: 15px; margin-bottom: 0; }
        #master-toggle-controls button { background-color: var(--color-bg-container-opaque); border-color: var(--color-neon-magenta); color: var(--color-neon-magenta); font-size: 0.9em; padding: 6px 12px; }
        #master-toggle-controls button:hover { background-color: var(--color-neon-magenta); color: var(--color-bg-deep); box-shadow: var(--glow-pink); }
        .control-group { background-color: var(--color-bg-container); border: 2px solid var(--color-neon-cyan); box-shadow: 0 0 15px rgba(3, 218, 197, 0.3), inset 0 0 10px rgba(3, 218, 197, 0.1); padding: 20px; width: 100%; border-radius: 8px; box-sizing: border-box; }
        .control-group.dragging { opacity: 0.4; border-style: dashed; }
        .control-group h3, .control-group h4 { color: var(--color-neon-cyan); margin-top: 0; font-size: 1.4em; border-bottom: 1px solid var(--color-neon-cyan); padding-bottom: 8px; letter-spacing: 1px; }
        .control-group h4 { margin-top: 20px; margin-bottom: 10px; font-size: 1.2em; border-bottom-style: dashed;}
        .collapsible-header { display: flex; justify-content: space-between; align-items: center; }
        .collapsible-header h3 { flex-grow: 1; margin-bottom: 0; cursor: move; user-select: none; }
        .header-toggle { padding: 4px 10px; margin-left: 15px; font-size: 0.8em; flex-shrink: 0; }
        .remove-module-btn { background-color: transparent; border: 1px solid var(--color-neon-pink); color: var(--color-neon-pink); font-weight: bold; font-size: 0.9em; padding: 0px 8px; margin-left: auto; margin-right: 10px; line-height: 1.5; flex-shrink: 0; }
        .remove-module-btn:hover { background-color: var(--color-neon-pink); color: var(--color-bg-deep); box-shadow: var(--glow-pink); }
        .control-group h3.collapsible { position: relative; text-shadow: var(--glow-cyan); margin-bottom: 15px; cursor: move; user-select: none; }
        .control-group .collapsible-header h3.collapsible { margin-bottom: 0; }
        .control-group h3.collapsible::after { content: '▲'; position: absolute; right: 0; top: 50%; transform: translateY(-50%); transition: transform 0.2s ease-in-out; cursor: pointer !important; }
        .control-group h3.collapsible.collapsed::after { transform: translateY(-50%) rotate(180deg); }
        .collapsible-content { transition: max-height 0.3s ease-out, opacity 0.2s ease-out; overflow: hidden; max-height: 2500px; opacity: 1; }
        .collapsible-content.collapsed { max-height: 0; opacity: 0; margin-top: 0 !important; padding-top: 0 !important; padding-bottom: 0 !important; border: none; }
        .control-row { display: flex; align-items: center; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; }
        label { color: var(--color-neon-magenta); font-size: 0.95em; min-width: 120px; margin-right: 5px; }
        input[type="number"], select, input[type="file"] { background-color: var(--color-bg-medium); color: var(--color-text-primary); border: 1px solid var(--color-neon-cyan); padding: 6px 8px; border-radius: 4px; font-family: var(--font-family-main); margin-left: 5px; vertical-align: middle; }
        input[type="number"] { width: 60px; }
        select { min-width: 60px; }
        input[type="file"] { max-width: 200px; }
        input[type="range"] { -webkit-appearance: none; appearance: none; width: auto; flex-grow: 1; height: 8px; background: var(--color-bg-medium); outline: none; border: 1px solid var(--color-neon-blue); border-radius: 4px; margin: 0 10px; vertical-align: middle; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; background: var(--color-neon-pink); cursor: pointer; border-radius: 50%; border: 2px solid var(--color-bg-deep); box-shadow: var(--glow-pink); }
        input[type="range"]::-moz-range-thumb { width: 16px; height: 16px; background: var(--color-neon-pink); cursor: pointer; border-radius: 50%; border: 2px solid var(--color-bg-deep); box-shadow: var(--glow-pink); }
        button { background-color: var(--color-bg-medium); color: var(--color-neon-cyan); border: 2px solid var(--color-neon-cyan); padding: 8px 15px; margin: 5px; cursor: pointer; border-radius: 5px; font-family: var(--font-family-main); text-transform: uppercase; letter-spacing: 1px; font-weight: bold; transition: all 0.2s ease-in-out; }
        button:hover, button:focus { background-color: var(--color-neon-cyan); color: var(--color-bg-deep); box-shadow: var(--glow-cyan); outline: none; }
        button.toggle-button.active { background-color: var(--color-neon-green); border-color: var(--color-neon-green); color: var(--color-bg-deep); box-shadow: var(--glow-green); }
        button#playStopSequencer.active { background-color: var(--color-neon-pink); border-color: var(--color-neon-pink); color: var(--color-bg-deep); box-shadow: var(--glow-pink); }
        span.value-display { color: var(--color-neon-yellow); font-weight: bold; margin-left: 8px; min-width: 35px; display: inline-block; }
        .harmonic-control-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; flex-wrap: wrap; border-bottom: 1px dashed var(--color-bg-medium); padding-bottom: 8px; }
        .harmonic-control-row:last-child { border-bottom: none; }
        .harmonic-control-row label { min-width: 80px; margin-right: 0;}
        .harmonic-control-row input[type="range"] { flex-grow: 0; width: 120px; margin: 0 5px;}
        .harmonic-control-row input[type="number"] { width: 55px; margin-left: 0;}
        .harmonic-control-row .value-display { margin-left: 2px; }
        .harmonic-control-row > span.harmonic-label { font-weight: bold; color: var(--color-neon-cyan); width: 30px; }
        .harmonic-control-row canvas { width: 50px; height: 30px; border: 1px solid var(--color-bg-deep); border-radius: 2px; margin-left: 10px; background-color: var(--color-bg-deep); }
        #octave-controls { margin-bottom: 15px; }
        #currentOctaveDisplay { font-weight: bold; margin: 0 15px; font-size: 1.2em; color: var(--color-neon-yellow); }
        #piano { display: flex; position: relative; height: 180px; width: 100%; max-width: 702px; border: 2px solid var(--color-neon-pink); border-radius: 8px; box-shadow: 0 0 10px var(--color-neon-pink), inset 0 0 8px rgba(255,7,235,0.2); background-color: #080112; margin: 15px auto; padding: 5px; box-sizing: border-box; }
        .key { border: 1px solid #000; box-sizing: border-box; cursor: pointer; user-select: none; border-radius: 3px; transition: all 0.1s ease-out; }
        .key.white { width: 48px; height: calc(100% - 10px); background-color: #f0f0ff; z-index: 1; margin: 0 1px; box-shadow: 2px 2px 3px rgba(0,0,0,0.4), inset 0px -5px 5px rgba(0,0,0,0.1); }
        .key.white.pressed, .key.white:active { background-color: #d0d7ff; box-shadow: inset 1px 1px 5px var(--color-neon-blue), 0 0 8px var(--color-neon-blue); transform: translateY(2px); }
        .key.black { width: 28px; height: 58%; background-color: #1a1a2e; color: var(--color-text-primary); position: absolute; z-index: 2; border-radius: 0 0 4px 4px; border: 1px solid #000; box-shadow: 1px 1px 3px rgba(0,0,0,0.6); }
        .key.black.pressed, .key.black:active { background-color: var(--color-neon-magenta); box-shadow: inset 0 0 5px rgba(255,255,255,0.2), 0 0 8px var(--color-neon-magenta); transform: translateY(1px); }
        .display-canvas { border: 1px solid var(--color-neon-cyan); background-color: var(--color-bg-container-opaque); margin-top:10px; display: block; margin-left:auto; margin-right:auto; box-shadow: inset 0 0 10px rgba(3, 218, 197, 0.2); max-width: 100%;}
        #sequencer-controls { margin-bottom: 10px; display: flex; flex-wrap: wrap; align-items: center; gap: 10px; justify-content: center;}
        #sequencer-steps { display: flex; gap: 2px; margin-top: 10px; justify-content: center; flex-wrap: wrap; min-height: 90px; }
        .seq-step { border: 2px solid var(--color-neon-blue); background-color: var(--color-bg-medium); color: var(--color-text-secondary); display: flex; flex-direction: row; align-items: center; justify-content: space-between; font-size: 0.8em; user-select: none; line-height: 1.2; border-radius: 4px; transition: all 0.2s ease; padding: 4px; width: 68px; }
        .seq-step-main { width: 48px; height: 85px; display: flex; flex-direction: column; align-items: center; justify-content: space-between;}
        .seq-step-note { cursor: pointer; width: 100%; text-align: center; padding: 2px 0; flex-shrink: 0; }
        .seq-step .step-octave { font-size: 0.7em; color: var(--color-neon-yellow); }
        .seq-step-drums-container { width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; border-top: 1px dashed var(--color-neon-blue); margin-top: 3px; padding-top: 3px; }
        .seq-step-drum { width: 90%; height: 12px; font-size: 0.75em; cursor: pointer; color: var(--color-text-dim); border: 1px solid var(--color-text-dim); border-radius: 2px; display: flex; align-items: center; justify-content: center; transition: all 0.1s ease; }
        .seq-step-drum.kick.active { background-color: var(--color-drum-kick); color: var(--color-bg-deep); border-color: var(--color-drum-kick); font-weight: bold; }
        .seq-step-drum.snare.active { background-color: var(--color-drum-snare); color: var(--color-bg-deep); border-color: var(--color-drum-snare); font-weight: bold; }
        .seq-step-drum.hat.active { background-color: var(--color-drum-hat); color: var(--color-bg-deep); border-color: var(--color-drum-hat); font-weight: bold; }
        .seq-step.selected-for-edit .seq-step-note { background-color: var(--color-bg-container); box-shadow: 0 0 5px var(--color-neon-yellow); color: var(--color-neon-yellow); }
        .seq-step.playing .seq-step-main { border-right: 2px solid var(--color-neon-pink); padding-right: 2px; }
        .seq-step.playing { border-color: var(--color-neon-pink); background-color: var(--color-neon-magenta); box-shadow: var(--glow-pink); color: var(--color-bg-deep); transform: scale(1.05); }
        .seq-step.playing .step-octave, .seq-step.playing .seq-step-drum { color: var(--color-bg-deep); }
        .seq-step.empty .seq-step-note { color: var(--color-text-dim); }
        input[type="range"].seq-step-volume { -webkit-appearance: slider-vertical; writing-mode: bt-lr; width: 10px; height: 80px; padding: 0 2px; margin: 0 0 0 4px;}
        #file-ops-controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap;}
        #file-ops-controls label { min-width: auto; margin-right: 5px;}
        #midi-controls { display: flex; flex-direction: column; gap: 10px; margin-top: 15px; }
        #midi-controls .midi-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap;}
        .drum-sample-loader { display: flex; align-items: center; gap: 8px; margin-top: 10px; }
        .drum-sample-loader button { padding: 4px 8px; font-size: 0.8em;}
        .drum-sample-loader span { font-size: 0.9em; color: var(--color-text-secondary); }
        #tremolo-gate-steps, #fxGate-steps { display: flex; gap: 5px; margin-top: 10px; justify-content: center; flex-wrap: wrap; }
        .gate-step { width: 25px; height: 25px; border: 2px solid var(--color-neon-blue); background-color: var(--color-bg-medium); cursor: pointer; border-radius: 3px; transition: all 0.1s ease; }
        .gate-step.active { background-color: var(--color-neon-green); border-color: var(--color-neon-green); box-shadow: var(--glow-green); }
        .adsr-container { display: flex; gap: 20px; align-items: flex-start; margin-top: 15px; }
        .adsr-controls { flex: 1; }
        #adsrCanvas { flex-shrink: 0; }
        #sampler-pads-container { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 15px; }
        .sampler-pad { background-color: var(--color-bg-medium); border: 2px solid var(--color-neon-blue); border-radius: 5px; padding: 10px; display: flex; flex-direction: column; gap: 8px; align-items: center; width: 160px; }
        .sampler-pad .play-button { width: 100%; height: 40px; font-size: 1.1em; }
        .sampler-pad .play-button.loaded { border-color: var(--color-neon-green); color: var(--color-neon-green); }
        .sampler-pad .play-button:active { transform: scale(0.95); }
        .sampler-pad label { min-width: initial; margin: 0; }
        .sampler-pad input[type="file"], .sampler-pad select { width: 100%; margin: 0; font-size: 0.8em; }
        .sampler-pad .volume-row { display: flex; align-items: center; width: 100%; gap: 5px; }
        .sampler-pad .volume-row input[type="range"] { margin: 0; }
    </style>
</head>
<body>
    <h1>Synthwave Lab</h1>

    <div id="master-toggle-controls">
        <button id="showAllBtn">Show All Sections</button>
        <button id="hideAllBtn">Hide All Sections</button>
    </div>
    
    <main id="main-container">
        <div class="column" id="column-left">
            <div class="control-group" id="group-ui">
                <h3 class="collapsible" draggable="true">File, MIDI & UI</h3>
                <div class="collapsible-content">
                    <div id="file-ops-controls">
                        <label for="presetSelect">Load Preset:</label>
                        <select id="presetSelect"></select>
                        <button id="importPresetsBtn">Import Presets</button>
                        <input type="file" id="importPresetsFile" accept=".json" style="display: none;">
                        <button id="exportPresetsBtn">Export Presets</button>
                        <button id="saveSettingsBtn">Save Settings</button>
                        <label for="loadFile" style="margin-left: 15px;">Load File:</label>
                        <input type="file" id="loadFile" accept=".json">
                    </div>
                    <div id="midi-controls">
                        <div class="midi-row">
                            <label for="midiDeviceSelect">MIDI Input:</label>
                            <select id="midiDeviceSelect" style="flex-grow:1;"><option>No MIDI devices found</option></select>
                            <button id="toggleMidiInBtn" class="toggle-button">Enable MIDI In</button>
                        </div>
                         <div class="midi-row">
                            <label for="midiOutDeviceSelect">MIDI Output:</label>
                            <select id="midiOutDeviceSelect" style="flex-grow:1;"><option>No MIDI devices found</option></select>
                            <button id="toggleMidiOutBtn" class="toggle-button">Enable MIDI Out</button>
                        </div>
                        <div class="midi-row">
                            <label for="modWheelDestination">Mod Wheel (CC 1):</label>
                            <select id="modWheelDestination" style="flex-grow:1;"></select>
                        </div>
                        <span id="midiStatus" style="margin-left: 10px; color: var(--color-text-secondary);"></span>
                    </div>
                    <div id="skin-controls" style="margin-top: 15px;">
                         <div class="control-row">
                            <label for="skinSelect">UI Skin:</label>
                            <select id="skinSelect" style="flex-grow:1;"></select>
                            <button id="importSkinsBtn">Import Skins</button>
                            <button id="exportSkinsBtn">Export Skins</button>
                        </div>
                        <div class="control-row" style="margin-top: 10px;">
                            <button id="loadBgImageBtn">Load BG Image</button>
                            <button id="clearBgImageBtn">Clear BG</button>
                            <input type="file" id="bgImageFile" accept="image/*" style="display: none;">
                        </div>
                        <div class="control-row" style="margin-top: 10px;">
                            <label for="uiZoom">UI Zoom:</label>
                            <input type="range" id="uiZoom" min="0.5" max="1.5" value="0.60" step="0.01">
                            <span id="uiZoomVal" class="value-display">0.60</span>
                        </div>
                    </div>
                    <h4 style="margin-top:20px;">Module Loader</h4>
                    <div id="module-loader-controls">
                        <div class="control-row">
                            <label for="knownModuleSelect">Load from Library:</label>
                            <select id="knownModuleSelect" style="flex-grow:1;"></select>
                            <button id="loadSelectedModuleBtn">Load</button>
                            <button id="updateModuleLibraryBtn">Update</button>
                        </div>
                        <div class="control-row">
                            <label for="moduleFile">Import from File (.js):</label>
                            <input type="file" id="moduleFile" accept=".js">
                        </div>
                        <span id="moduleLoadStatus" style="margin-left: 10px; font-size: 0.9em; color: var(--color-text-secondary);"></span>
                    </div>
                    <h4>Signal Flow</h4>
                    <canvas id="signalFlowCanvas" width="850" height="200" class="display-canvas"></canvas>
                </div>
            </div>

            <div class="control-group" id="group-global">
                <h3 class="collapsible" draggable="true">Global Controls</h3>
                <div class="collapsible-content">
                    <div class="control-row">
                        <label for="masterVolume">Master Volume:</label>
                        <input type="range" id="masterVolume" min="0" max="1" value="0.3" step="0.01">
                        <span id="masterVolumeVal" class="value-display">0.30</span>
                    </div>
                    <div class="control-row">
                        <label for="keysVolume">Keys Volume:</label>
                        <input type="range" id="keysVolume" min="0" max="1" value="0.8" step="0.01">
                        <span id="keysVolumeVal" class="value-display">0.80</span>
                    </div>
                    <div class="control-row">
                        <label for="pitchBendRange">Pitch Bend (Semi):</label>
                        <input type="range" id="pitchBendRange" min="0" max="12" value="2" step="1">
                        <span id="pitchBendRangeVal" class="value-display">2</span>
                         <button id="randomizeAllSettingsBtn" style="margin-left: auto;">Randomize Synth & FX</button>
                    </div>
                </div>
            </div>

            <div class="control-group" id="group-timbre">
                <h3 class="collapsible" draggable="true">Timbre</h3>
                <div class="collapsible-content">
                    <div class="control-row" style="margin-bottom: 15px;">
                        <label for="numHarmonics">Number of Waves:</label>
                        <input type="number" id="numHarmonics" min="1" max="16" value="6">
                        <button id="applyHarmonicsBtn">Apply</button>
                        <span style="margin-left:auto; color: var(--color-text-secondary); font-style: italic;">More waves = higher CPU.</span>
                    </div>
                    <div id="additive-controls" style="margin-top:15px;">
                        <!-- Harmonic controls will be generated by script here -->
                    </div>
                    <h4>Summed Waveform</h4>
                    <canvas id="timbreSumCanvas" width="580" height="100" class="display-canvas"></canvas>
                </div>
            </div>

            <div class="control-group" id="group-piano">
                <h3 class="collapsible" draggable="true">Piano</h3>
                <div class="collapsible-content">
                    <div id="octave-controls"> <button id="octaveDownBtn">&laquo; Octave Down</button> <span id="currentOctaveDisplay">Octave: 0</span> <button id="octaveUpBtn">Octave Up &raquo;</button> </div>
                    <div id="piano">
                         <!-- Piano keys are omitted for brevity -->
                         <div class="key white" data-note="C3" data-note-label="C" data-midi-note="48" data-frequency="130.81"></div><div class="key white" data-note="D3" data-note-label="D" data-midi-note="50" data-frequency="146.83"></div><div class="key white" data-note="E3" data-note-label="E" data-midi-note="52" data-frequency="164.81"></div><div class="key white" data-note="F3" data-note-label="F" data-midi-note="53" data-frequency="174.61"></div><div class="key white" data-note="G3" data-note-label="G" data-midi-note="55" data-frequency="196.00"></div><div class="key white" data-note="A3" data-note-label="A" data-midi-note="57" data-frequency="220.00"></div><div class="key white" data-note="B3" data-note-label="B" data-midi-note="59" data-frequency="246.94"></div> <div class="key black" data-note="C#3" data-note-label="C♯" data-midi-note="49" data-frequency="138.59" style="left: 32px;"></div><div class="key black" data-note="D#3" data-note-label="D♯" data-midi-note="51" data-frequency="155.56" style="left: 83px;"></div><div class="key black" data-note="F#3" data-note-label="F♯" data-midi-note="54" data-frequency="185.00" style="left: 185px;"></div><div class="key black" data-note="G#3" data-note-label="G♯" data-midi-note="56" data-frequency="207.65" style="left: 236px;"></div><div class="key black" data-note="A#3" data-note-label="A♯" data-midi-note="58" data-frequency="233.08" style="left: 287px;"></div> <div class="key white" data-note="C4" data-note-label="C" data-midi-note="60" data-frequency="261.63"></div><div class="key white" data-note="D4" data-note-label="D" data-midi-note="62" data-frequency="293.66"></div><div class="key white" data-note="E4" data-note-label="E" data-midi-note="64" data-frequency="329.63"></div><div class="key white" data-note="F4" data-note-label="F" data-midi-note="65" data-frequency="349.23"></div><div class="key white" data-note="G4" data-note-label="G" data-midi-note="67" data-frequency="392.00"></div><div class="key white" data-note="A4" data-note-label="A" data-midi-note="69" data-frequency="440.00"></div><div class="key white" data-note="B4" data-note-label="B" data-midi-note="71" data-frequency="493.88"></div> <div class="key black" data-note="C#4" data-note-label="C♯" data-midi-note="61" data-frequency="277.18" style="left: 382px;"></div><div class="key black" data-note="D#4" data-note-label="D♯" data-midi-note="63" data-frequency="311.13" style="left: 433px;"></div><div class="key black" data-note="F#4" data-note-label="F♯" data-midi-note="66" data-frequency="369.99" style="left: 535px;"></div><div class="key black" data-note="G#4" data-note-label="G♯" data-midi-note="68" data-frequency="415.30" style="left: 586px;"></div><div class="key black" data-note="A#4" data-note-label="A♯" data-midi-note="70" data-frequency="466.16" style="left: 637px;"></div>
                    </div>
                </div>
            </div>
            
            <div class="control-group" id="group-sampler">
                <h3 class="collapsible" draggable="true">Sampler</h3>
                <div class="collapsible-content">
                    <div class="control-row">
                        <label for="numSamplers">Number of Pads:</label>
                        <input type="number" id="numSamplers" value="4" min="0" max="16">
                        <button id="applyNumSamplersBtn">Set Pads</button>
                    </div>
                    <div id="sampler-pads-container">
                        <!-- Sampler pads will be generated here -->
                    </div>
                </div>
            </div>

            <div class="control-group" id="group-waveform">
                <h3 class="collapsible" draggable="true">Live Waveform</h3>
                <div class="collapsible-content">
                    <canvas id="waveformCanvas" width="580" height="100" class="display-canvas"></canvas>
                </div>
            </div>

            <div class="control-group" id="group-adsr">
                <h3 class="collapsible" draggable="true">ADSR Envelope</h3>
                <div class="collapsible-content">
                    <div class="adsr-container">
                        <div class="adsr-controls">
                            <div class="control-row">
                                <label for="adsrAttack">Attack (s):</label>
                                <input type="range" id="adsrAttack" min="0.001" max="2" value="0.01" step="0.001">
                                <span id="adsrAttackVal" class="value-display">0.010</span>
                            </div>
                            <div class="control-row">
                                <label for="adsrDecay">Decay (s):</label>
                                <input type="range" id="adsrDecay" min="0.001" max="2" value="0.1" step="0.001">
                                <span id="adsrDecayVal" class="value-display">0.100</span>
                            </div>
                            <div class="control-row">
                                <label for="adsrSustain">Sustain Level:</label>
                                <input type="range" id="adsrSustain" min="0" max="1" value="0.8" step="0.01">
                                <span id="adsrSustainVal" class="value-display">0.80</span>
                            </div>
                            <div class="control-row">
                                <label for="adsrRelease">Release (s):</label>
                                <input type="range" id="adsrRelease" min="0.001" max="5" value="0.2" step="0.001">
                                <span id="adsrReleaseVal" class="value-display">0.200</span>
                            </div>
                             <div class="control-row">
                                <label for="adsrVelocitySens">Velocity Sens:</label>
                                <input type="range" id="adsrVelocitySens" min="0" max="1" value="0.5" step="0.01">
                                <span id="adsrVelocitySensVal" class="value-display">0.50</span>
                            </div>
                        </div>
                        <canvas id="adsrCanvas" width="250" height="120" class="display-canvas"></canvas>
                    </div>
                </div>
            </div>

            <div class="control-group" id="group-lfo1">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">LFO 1 (Global Modulator)</h3>
                    <button id="toggleLfo1" class="toggle-button header-toggle">Toggle LFO 1 (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="lfo1Rate">Rate (Hz):</label> <input type="range" id="lfo1Rate" min="0.05" max="20" value="2" step="0.05"> <span id="lfo1RateVal" class="value-display">2.0</span></div>
                    <div class="control-row"><label for="lfo1Depth">Depth:</label> <input type="range" id="lfo1Depth" min="0" max="1" value="0.5" step="0.01"> <span id="lfo1DepthVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="lfo1Waveform">Waveform:</label> <select id="lfo1Waveform"><option value="sine">Sine</option><option value="square">Square</option><option value="sawtooth">Sawtooth</option><option value="triangle">Triangle</option><option value="noise">Noise (S&H)</option></select></div>
                    <div class="control-row"><label for="lfo1Destination">Destination:</label> <select id="lfo1Destination"><option value="none">None</option><option value="keysVolume">Keys Volume (Tremolo)</option><option value="eqLowGain">EQ Low Gain</option><option value="eqMidGain">EQ Mid Gain</option><option value="eqHighGain">EQ High Gain</option><option value="phaserRate">Phaser Rate</option><option value="flangerRate">Flanger Rate</option><option value="chorusDepth">Chorus Depth</option><option value="delay1Mix">Delay 1 Mix</option><option value="delay2Mix">Delay 2 Mix</option><option value="distortionMix">Distortion Mix</option></select></div>
                </div>
            </div>

            <div class="control-group" id="group-lfo2">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">LFO 2 (Global Modulator)</h3>
                    <button id="toggleLfo2" class="toggle-button header-toggle">Toggle LFO 2 (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="lfo2Rate">Rate (Hz):</label> <input type="range" id="lfo2Rate" min="0.05" max="20" value="0.5" step="0.05"> <span id="lfo2RateVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="lfo2Depth">Depth:</label> <input type="range" id="lfo2Depth" min="0" max="1" value="0" step="0.01"> <span id="lfo2DepthVal" class="value-display">0.00</span></div>
                    <div class="control-row"><label for="lfo2Waveform">Waveform:</label> <select id="lfo2Waveform"><option value="sine">Sine</option><option value="square">Square</option><option value="sawtooth">Sawtooth</option><option value="triangle">Triangle</option><option value="noise">Noise (S&H)</option></select></div>
                    <div class="control-row"><label for="lfo2Destination">Destination:</label> <select id="lfo2Destination"><option value="none">None</option><option value="keysVolume">Keys Volume (Tremolo)</option><option value="eqLowGain">EQ Low Gain</option><option value="eqMidGain">EQ Mid Gain</option><option value="eqHighGain">EQ High Gain</option><option value="phaserRate">Phaser Rate</option><option value="flangerRate">Flanger Rate</option><option value="chorusDepth">Chorus Depth</option><option value="delay1Mix">Delay 1 Mix</option><option value="delay2Mix">Delay 2 Mix</option><option value="distortionMix">Distortion Mix</option></select></div>
                </div>
            </div>
        </div>

        <div class="column" id="column-right">
            <div class="control-group" id="group-sequencer">
                <h3 class="collapsible" draggable="true">Sequencer & Drum Mix</h3>
                <div class="collapsible-content">
                    <div id="sequencer-controls"> <button id="playStopSequencer">Play Sequencer</button> <label for="bpmSlider">BPM:</label><input type="range" id="bpmSlider" min="40" max="240" value="120" step="1"><span id="bpmVal" class="value-display">120</span> <label for="sequencerVolume">Seq Vol:</label><input type="range" id="sequencerVolume" min="0" max="1" value="0.7" step="0.01"><span id="sequencerVolumeVal" class="value-display">0.70</span> <label for="numStepsSelect">Steps:</label><select id="numStepsSelect"><script>for(let s=1; s<=16; s++) document.write(`<option value="${s}" ${s===8 ? 'selected':''}>${s}</option>`);</script></select> <button id="clearSelectedStepBtn">Clear Step</button> <button id="clearAllSeqBtn">Clear All</button> <button id="randomizeSequencerBtn">Random Chord Arp</button> </div>
                    <div style="font-size:0.85em; margin-top: 5px; text-align: center; color: var(--color-text-secondary);">(Click note area to select, click drum parts to toggle.)</div>
                    <div id="sequencer-steps"></div>
                     <div class="drum-sample-loader">
                        <label for="loadKickSample">Kick Sample:</label>
                        <input type="file" id="loadKickSample" accept=".wav">
                        <button id="clearKickSampleBtn">Clear</button>
                        <span id="kickSampleName">Default</span>
                    </div>
                    <div class="control-row">
                        <label for="kickVolume">Kick Volume:</label>
                        <input type="range" id="kickVolume" min="0" max="1.5" value="1.0" step="0.01">
                        <span id="kickVolumeVal" class="value-display">1.00</span>
                    </div>
                     <div class="drum-sample-loader">
                        <label for="loadSnareSample">Snare Sample:</label>
                        <input type="file" id="loadSnareSample" accept=".wav">
                        <button id="clearSnareSampleBtn">Clear</button>
                        <span id="snareSampleName">Default</span>
                    </div>
                    <div class="control-row">
                        <label for="snareVolume">Snare Volume:</label>
                        <input type="range" id="snareVolume" min="0" max="1.5" value="1.0" step="0.01">
                        <span id="snareVolumeVal" class="value-display">1.00</span>
                    </div>
                    <div class="drum-sample-loader">
                        <label for="loadHatSample">Hi-Hat Sample:</label>
                        <input type="file" id="loadHatSample" accept=".wav">
                        <button id="clearHatSampleBtn">Clear</button>
                        <span id="hatSampleName">Default</span>
                    </div>
                    <div class="control-row">
                        <label for="hatVolume">Hi-Hat Volume:</label>
                        <input type="range" id="hatVolume" min="0" max="1.5" value="0.8" step="0.01">
                        <span id="hatVolumeVal" class="value-display">0.80</span>
                    </div>
                </div>
            </div>

            <div class="control-group" id="group-distortion">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Distortion</h3>
                    <button id="toggleDistortion" class="toggle-button header-toggle">Toggle Distortion (OFF)</button>
                </div>
                <div class="collapsible-content">
                     <div class="control-row">
                        <label for="distortionPreset">Preset:</label>
                        <select id="distortionPreset">
                            <option value="saturation">Saturation</option>
                            <option value="fuzz">Fuzz</option>
                            <option value="overdrive">Overdrive</option>
                            <option value="crunch">Crunch</option>
                            <option value="bitcrush">Bitcrush</option>
                            <option value="tubeamp">Tube Amp</option>
                        </select>
                    </div>
                    <div class="control-row"><label for="distortionDrive">Drive:</label> <input type="range" id="distortionDrive" min="1" max="100" value="20" step="1"> <span id="distortionDriveVal" class="value-display">20</span></div>
                    <div class="control-row"><label for="distortionTone">Tone (LPF):</label> <input type="range" id="distortionTone" min="500" max="20000" value="20000" step="100"> <span id="distortionToneVal" class="value-display">20000</span></div>
                    <div class="control-row"><label for="distortionMix">Mix (Wet):</label> <input type="range" id="distortionMix" min="0" max="1" value="0" step="0.01"> <span id="distortionMixVal" class="value-display">0.00</span></div>
                    <div class="control-row"><label for="distortionGain">Output Gain:</label> <input type="range" id="distortionGain" min="0" max="2" value="1" step="0.01"> <span id="distortionGainVal" class="value-display">1.00</span></div>
                </div>
            </div>

            <div class="control-group" id="group-ringMod">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Ring Modulator</h3>
                    <button id="toggleRingMod" class="toggle-button header-toggle">Toggle RingMod (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="ringModFreq">Carrier Freq (Hz):</label> <input type="range" id="ringModFreq" min="1" max="2000" value="30" step="1"> <span id="ringModFreqVal" class="value-display">30</span></div>
                    <div class="control-row"><label for="ringModMix">Mix (Wet):</label> <input type="range" id="ringModMix" min="0" max="1" value="0" step="0.01"> <span id="ringModMixVal" class="value-display">0.00</span></div>
                </div>
            </div>

            <div class="control-group" id="group-eq">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">EQ & Filters</h3>
                    <button id="toggleEq" class="toggle-button header-toggle">Toggle EQ (OFF)</button>
                </div>
                <div class="collapsible-content">
                     <canvas id="eqCanvas" width="580" height="120" class="display-canvas" style="margin-bottom: 15px;"></canvas>
                    <div class="control-row"><label for="eqHpfCutoff">HPF Cutoff (Hz):</label> <input type="range" id="eqHpfCutoff" min="20" max="10000" value="20" step="10"> <span id="eqHpfCutoffVal" class="value-display">20</span></div>
                    <div class="control-row"><label for="eqLowGain">Low Gain (dB):</label> <input type="range" id="eqLowGain" min="-24" max="24" value="0" step="1"> <span id="eqLowGainVal" class="value-display">0</span> <label for="eqLowFreq" style="margin-left: 15px;">Freq:</label> <input type="range" id="eqLowFreq" min="50" max="800" value="250" step="10"> <span id="eqLowFreqVal" class="value-display">250</span></div>
                    <div class="control-row"><label for="eqMidGain">Mid Gain (dB):</label> <input type="range" id="eqMidGain" min="-24" max="24" value="0" step="1"> <span id="eqMidGainVal" class="value-display">0</span> <label for="eqMidFreq" style="margin-left: 15px;">Freq:</label> <input type="range" id="eqMidFreq" min="200" max="5000" value="1000" step="50"> <span id="eqMidFreqVal" class="value-display">1000</span> <label for="eqMidQ" style="margin-left: 15px;">Q:</label> <input type="range" id="eqMidQ" min="0.1" max="10" value="1" step="0.1"> <span id="eqMidQVal" class="value-display">1.0</span></div>
                    <div class="control-row"><label for="eqHighGain">High Gain (dB):</label> <input type="range" id="eqHighGain" min="-24" max="24" value="0" step="1"> <span id="eqHighGainVal" class="value-display">0</span> <label for="eqHighFreq" style="margin-left: 15px;">Freq:</label> <input type="range" id="eqHighFreq" min="1000" max="12000" value="4000" step="100"> <span id="eqHighFreqVal" class="value-display">4000</span></div>
                    <div class="control-row"><label for="eqLpfCutoff">LPF Cutoff (Hz):</label> <input type="range" id="eqLpfCutoff" min="100" max="20000" value="20000" step="100"> <span id="eqLpfCutoffVal" class="value-display">20000</span></div>
                </div>
            </div>

            <div class="control-group" id="group-tremolo">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Trance Gate</h3>
                    <button id="toggleTremolo" class="toggle-button header-toggle">Toggle Gate (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row">
                        <label for="tremoloDepth">Depth:</label> <input type="range" id="tremoloDepth" min="0" max="1" value="1" step="0.01"> <span id="tremoloDepthVal" class="value-display">1.00</span>
                        <label for="tremoloGateLength" style="margin-left: 15px;">Gate Length:</label>
                        <select id="tremoloGateLength">
                            <option value="1.0">Full Step</option>
                            <option value="0.95" selected>95%</option>
                            <option value="0.75">75% (Dotted)</option>
                            <option value="0.5">50%</option>
                            <option value="0.25">25%</option>
                            <option value="0.1">10%</option>
                        </select>
                    </div>
                    <div id="tremolo-gate-steps"></div>
                </div>
            </div>
            
            <div class="control-group" id="group-fader">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Fader</h3>
                    <button id="toggleFader" class="toggle-button header-toggle">Toggle Fader (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row">
                        <label for="faderShape">Shape:</label>
                        <select id="faderShape">
                            <option value="none" selected>None</option>
                            <option value="fadeIn">Fade In</option>
                            <option value="fadeOut">Fade Out</option>
                            <option value="dip">Dip (Out/In)</option>
                        </select>
                    </div>
                    <div class="control-row"><label for="faderTime">Fade Time (s):</label> <input type="range" id="faderTime" min="0.1" max="5" value="1" step="0.1"> <span id="faderTimeVal" class="value-display">1.0</span></div>
                    <div class="control-row"><label for="faderMinVolume">Min Volume:</label> <input type="range" id="faderMinVolume" min="0" max="1" value="0" step="0.01"> <span id="faderMinVolumeVal" class="value-display">0.00</span></div>
                </div>
            </div>

            <div class="control-group" id="group-fxGate">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">FX Gate</h3>
                    <button id="toggleFxGate" class="toggle-button header-toggle">Toggle FX Gate (OFF)</button>
                </div>
                <div class="collapsible-content">
                     <div class="control-row">
                        <label for="fxGateDestination">Destination:</label>
                        <select id="fxGateDestination">
                            <option value="none" selected>None</option>
                            <option value="delay1Mix">Delay 1 Mix</option>
                            <option value="delay2Mix">Delay 2 Mix</option>
                            <option value="chorusMix">Chorus Mix</option>
                            <option value="flangerMix">Flanger Mix</option>
                            <option value="phaserMix">Phaser Mix</option>
                            <option value="ringModMix">RingMod Mix</option>
                            <option value="distortionMix">Distortion Mix</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label for="fxGateDepth">Depth:</label> <input type="range" id="fxGateDepth" min="0" max="1" value="1" step="0.01"> <span id="fxGateDepthVal" class="value-display">1.00</span>
                        <label for="fxGateGateLength" style="margin-left: 15px;">Gate Length:</label>
                        <select id="fxGateGateLength">
                            <option value="1.0">Full Step</option>
                            <option value="0.95" selected>95%</option>
                            <option value="0.75">75% (Dotted)</option>
                            <option value="0.5">50%</option>
                            <option value="0.25">25%</option>
                            <option value="0.1">10%</option>
                        </select>
                    </div>
                    <div id="fxGate-steps"></div>
                </div>
            </div>
            
            <div class="control-group" id="group-phaser">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Phaser Effect</h3>
                    <button id="togglePhaser" class="toggle-button header-toggle">Toggle Phaser (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="phaserRate">Rate (Hz):</label> <input type="range" id="phaserRate" min="0.1" max="5" value="0.5" step="0.05"> <span id="phaserRateVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="phaserDepth">Depth (Mod. Hz):</label> <input type="range" id="phaserDepth" min="100" max="1500" value="700" step="50"> <span id="phaserDepthVal" class="value-display">700</span></div>
                    <div class="control-row"><label for="phaserBaseFreq">Base Freq (Hz):</label> <input type="range" id="phaserBaseFreq" min="200" max="2000" value="800" step="50"> <span id="phaserBaseFreqVal" class="value-display">800</span></div>
                    <div class="control-row"><label for="phaserFeedback">Feedback:</label> <input type="range" id="phaserFeedback" min="0" max="0.9" value="0.5" step="0.01"> <span id="phaserFeedbackVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="phaserMix">Mix (Wet):</label> <input type="range" id="phaserMix" min="0" max="1" value="0" step="0.01"> <span id="phaserMixVal" class="value-display">0.00</span></div>
                </div>
            </div>
            
            <div class="control-group" id="group-flanger">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Flanger Effect</h3>
                    <button id="toggleFlanger" class="toggle-button header-toggle">Toggle Flanger (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="flangerRate">Rate (Hz):</label> <input type="range" id="flangerRate" min="0.05" max="5" value="0.2" step="0.01"> <span id="flangerRateVal" class="value-display">0.20</span></div>
                    <div class="control-row"><label for="flangerDepth">Depth (ms):</label> <input type="range" id="flangerDepth" min="0.1" max="5" value="1" step="0.1"> <span id="flangerDepthVal" class="value-display">1.0</span></div>
                    <div class="control-row"><label for="flangerDelay">Base Delay (ms):</label> <input type="range" id="flangerDelay" min="0.5" max="15" value="3" step="0.1"> <span id="flangerDelayVal" class="value-display">3.0</span></div>
                    <div class="control-row"><label for="flangerFeedback">Feedback:</label> <input type="range" id="flangerFeedback" min="0" max="0.9" value="0.5" step="0.01"> <span id="flangerFeedbackVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="flangerMix">Mix (Wet):</label> <input type="range" id="flangerMix" min="0" max="1" value="0" step="0.01"> <span id="flangerMixVal" class="value-display">0.00</span></div>
                </div>
            </div>

            <div class="control-group" id="group-chorus">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Chorus Effect</h3>
                    <button id="toggleChorus" class="toggle-button header-toggle">Toggle Chorus (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="chorusRate">Rate (Hz):</label> <input type="range" id="chorusRate" min="0.1" max="10" value="1.5" step="0.1"> <span id="chorusRateVal" class="value-display">1.5</span></div>
                    <div class="control-row"><label for="chorusDepth">Depth (ms):</label> <input type="range" id="chorusDepth" min="0.5" max="10" value="2" step="0.1"> <span id="chorusDepthVal" class="value-display">2.0</span></div>
                    <div class="control-row"><label for="chorusDelay">Base Delay (ms):</label> <input type="range" id="chorusDelay" min="5" max="50" value="20" step="1"> <span id="chorusDelayVal" class="value-display">20</span></div>
                    <div class="control-row"><label for="chorusMix">Mix (Wet):</label> <input type="range" id="chorusMix" min="0" max="1" value="0" step="0.01"> <span id="chorusMixVal" class="value-display">0.00</span></div>
                </div>
            </div>

            <div class="control-group" id="group-delay1">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Delay 1 Effect</h3>
                    <button id="toggleDelay1" class="toggle-button header-toggle">Toggle Delay1 (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="delay1Time">Time (s):</label> <input type="range" id="delay1Time" min="0.01" max="2" value="0.5" step="0.01"> <span id="delay1TimeVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="delay1Feedback">Feedback:</label> <input type="range" id="delay1Feedback" min="0" max="0.95" value="0.4" step="0.01"> <span id="delay1FeedbackVal" class="value-display">0.40</span></div>
                    <div class="control-row"><label for="delay1Mix">Mix (Wet):</label> <input type="range" id="delay1Mix" min="0" max="1" value="0" step="0.01"> <span id="delay1MixVal" class="value-display">0.00</span></div>
                    <div class="control-row"><label for="delay1Pan">Pan L/R:</label> <input type="range" id="delay1Pan" min="-1" max="1" value="0" step="0.01"> <span id="delay1PanVal" class="value-display">0.00</span></div>
                    <div class="control-row"><label for="delay1LpfCutoff">LPF Cutoff (Hz):</label> <input type="range" id="delay1LpfCutoff" min="100" max="20000" value="20000" step="100"> <span id="delay1LpfCutoffVal" class="value-display">20000</span></div>
                    <div class="control-row"><label for="delay1HpfCutoff">HPF Cutoff (Hz):</label> <input type="range" id="delay1HpfCutoff" min="20" max="10000" value="20" step="10"> <span id="delay1HpfCutoffVal" class="value-display">20</span></div>
                </div>
            </div>

            <div class="control-group" id="group-delay2">
                <div class="collapsible-header">
                    <h3 class="collapsible" draggable="true">Delay 2 Effect</h3>
                    <button id="toggleDelay2" class="toggle-button header-toggle">Toggle Delay2 (OFF)</button>
                </div>
                <div class="collapsible-content">
                    <div class="control-row"><label for="delay2Time">Time (s):</label> <input type="range" id="delay2Time" min="0.01" max="2" value="0.5" step="0.01"> <span id="delay2TimeVal" class="value-display">0.50</span></div>
                    <div class="control-row"><label for="delay2Feedback">Feedback:</label> <input type="range" id="delay2Feedback" min="0" max="0.95" value="0.4" step="0.01"> <span id="delay2FeedbackVal" class="value-display">0.40</span></div>
                    <div class="control-row"><label for="delay2Mix">Mix (Wet):</label> <input type="range" id="delay2Mix" min="0" max="1" value="0" step="0.01"> <span id="delay2MixVal" class="value-display">0.00</span></div>
                    <div class="control-row"><label for="delay2Pan">Pan L/R:</label> <input type="range" id="delay2Pan" min="-1" max="1" value="0" step="0.01"> <span id="delay2PanVal" class="value-display">0.00</span></div>
                    <div class="control-row"><label for="delay2LpfCutoff">LPF Cutoff (Hz):</label> <input type="range" id="delay2LpfCutoff" min="100" max="20000" value="20000" step="100"> <span id="delay2LpfCutoffVal" class="value-display">20000</span></div>
                    <div class="control-row"><label for="delay2HpfCutoff">HPF Cutoff (Hz):</label> <input type="range" id="delay2HpfCutoff" min="20" max="10000" value="20" step="10"> <span id="delay2HpfCutoffVal" class="value-display">20</span></div>
                </div>
            </div>
        </div>
    </main>

    <script src="sine.js"></script>
    <script src="fx.js"></script>
    <script src="eq.js"></script>
    <script src="adsr.js"></script>
    <script src="midi.js"></script>
    <script src="drums_sequencer.js"></script>
    <script src="main.js"></script>
</body>
</html>
